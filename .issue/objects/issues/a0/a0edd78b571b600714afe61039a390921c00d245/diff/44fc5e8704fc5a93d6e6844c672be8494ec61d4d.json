[{"action": "open", "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596014}, {"action": "set-message", "params": {"text": "Static initialisation blocks\n\nCurrent implementation of static variables has some serious overhead.\nThe initialisation must be run at *every* function call and involves a\nconditional instruction.\n\n    .function: foo/0\n        .name: iota a_static_variable\n        .name: iota is_initialised\n\n        isnull %is_initialised local %a_static_variable static\n        if %is_initialised local foo_0_body +1\n        integer %a_static_variable local 42\n\n        .mark: foo_0_body\n        print %a_static_variable static\n        iinc %a_static_variable static\n\nWith static initialisation blocks, initialisation of static variables\nwould be run exactly once (if initialisation was performed eagerly), or\nat most once (if performed lazily; this would need a conditional check\nbefore every call though...).\n\n    .static_initialisation: foo/0\n        allocate_registers %0 local\n        .name: iota a_static_variable\n        integer %1 static 42\n        return\n    .end\n    .function: foo/0\n        .name: iota a_static_variable\n        print %a_static_variable static\n        iinc %a_static_variable static\n\nThis is much better: initialisation is performed using straight logic,\nwith no conditional jumps, and the \"normal\" function gets a prepared\nenvironment so it can just do its job."}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596024}, {"action": "push-tags", "params": {"tags": []}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596026}, {"action": "push-milestones", "params": {"milestones": []}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596029}, {"action": "push-tags", "params": {"tags": ["viuavm"]}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.59612}, {"action": "set-project-tag", "params": {"tag": "viuavm"}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596124}, {"action": "set-project-name", "params": {"name": "Viua Virtual Machine"}, "author": {"author.email": "marejm@ozro.pw", "author.name": "Marek Marecki"}, "timestamp": 1540754060.596127}]